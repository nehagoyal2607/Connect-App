<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Emergency</title>
  <!-- Latest compiled and minified CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- Latest compiled JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<!-- <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=<%=apikey%>"></script> -->
  <link rel="stylesheet" href="">
  
</head>
<body>
    <input type="text" id = "locationMsg"></input>
    <button onclick="addLoc()">Attach Location</button>
    <button onclick="">Call</button>
<script>
    const locTextBox = document.getElementById("locationMsg");
    function addLoc(){
    /* HTML5 Geolocation */
    // navigator.geolocation.getCurrentPosition(
    //      function( position ){ // success cb
    //          /* Current Coordinate */
    //          var lat = position.coords.latitude;
    //          var lng = position.coords.longitude;
    //         //  var google_map_pos = new google.maps.LatLng( lat, lng );
    //          locTextBox.value = lat+"*"+lng;
    //          /* Use Geocoder to get address */
    //         //  var google_maps_geocoder = new google.maps.Geocoder();
    //         //  google_maps_geocoder.geocode(
    //         //      { 'latLng': google_map_pos },
    //         //      function( results, status ) {
    //         //          if ( status == google.maps.GeocoderStatus.OK && results[0] ) {
    //         //              locTextBox.value = results[0].formatted_address;
    //         //              console.log( results[0].formatted_address );
    //         //          }
    //         //      }
    //         //  );
    //      },
    //      function(){ // fail cb
    //      }
    //  );
    var requestOptions = {
      method: 'GET',
    };

    fetch("https://api.geoapify.com/v1/ipinfo?&apiKey=72ea8b35f5d746ea896b83b603f72c87", requestOptions)
      .then(response => response.json())
      .then(result => {
        locTextBox.value = result.city.name+", "+result.country.name+" , pincode- " +result.postcode + ", Latutide and longitude" + result.location.latitude + " "+ result.location.longitude;
        console.log(result)}
      )
      .catch(error => console.log('error', error));
    }
</script>
</body>
</html>